<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Hexo使用记录</title>
    <url>/2021/10/08/Hexo/</url>
    <content><![CDATA[<p>记录Hexo主题的一些命令</p>
<span id="more"></span>

<h3 id="Hexo常用命令"><a href="#Hexo常用命令" class="headerlink" title="Hexo常用命令"></a>Hexo常用命令</h3><p><img src="https://nanamyblog.oss-cn-beijing.aliyuncs.com/2021/10/9/hexo.svg" alt="Hexo"></p>
<table>
<thead>
<tr>
<th>命令</th>
<th>简写</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>npm install hexo -g</td>
<td></td>
<td>安装hexo</td>
</tr>
<tr>
<td>npm update hexo -g</td>
<td></td>
<td>更新hexo</td>
</tr>
<tr>
<td>hexo init</td>
<td></td>
<td>初始化</td>
</tr>
<tr>
<td>npm install hexo-xxxx –save</td>
<td></td>
<td>安装插件</td>
</tr>
<tr>
<td>npm uninstall hexo-xxx –save</td>
<td></td>
<td>卸载插件</td>
</tr>
<tr>
<td>hexo n “文章名”</td>
<td></td>
<td>新建文章(日常在source/_drafts目录下创建文件是草稿，source/_posts目录下创建文件是发布的文章)</td>
</tr>
<tr>
<td>hexo clean</td>
<td></td>
<td>清除缓存</td>
</tr>
<tr>
<td>hexo generate</td>
<td>hexo g</td>
<td>生成静态文件(public文件夹内容生成)</td>
</tr>
<tr>
<td>hexo deploy</td>
<td>hexo d</td>
<td>部署</td>
</tr>
<tr>
<td>hexo d -g</td>
<td></td>
<td>生成静态文件并部署</td>
</tr>
<tr>
<td>hexo server</td>
<td>hexo s</td>
<td>预览,启动服务器</td>
</tr>
<tr>
<td>hexo s -p 端口号</td>
<td></td>
<td>自定义端口号</td>
</tr>
<tr>
<td>hexo s -i IP地址</td>
<td></td>
<td>自定义IP</td>
</tr>
<tr>
<td>hexo s -s</td>
<td></td>
<td>使用静态文件启动</td>
</tr>
</tbody></table>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><p><a href="https://hexo.io/docs/one-command-deployment.html">Hexo官网</a></p>
<p><a href="https://zhwangart.com/2018/11/30/Ocean/">Ocean文档</a></p>
<p><a href="https://zhwangart.com/2019/07/02/Ocean-Issues/">Ocean Issues</a></p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
  </entry>
  <entry>
    <title>Dart</title>
    <url>/2021/10/10/Dart/</url>
    <content><![CDATA[<p>Dart基础语法笔记</p>
<span id="more"></span>

<h3 id="Dart介绍："><a href="#Dart介绍：" class="headerlink" title="Dart介绍："></a>Dart介绍：</h3><p>Dart是由谷歌开发的计算机编程语言,它可以被用于web、服务器、移动应用 和物联网等领域的开发。</p>
<p>Dart诞生于2011年，号称要取代JavaScript。但是过去的几年中一直不温不火。直到Flutter的出现现在被人们重新重视。</p>
<p>要学Flutter的话我们必须首先得会Dart。</p>
<h3 id="Hello-world"><a href="#Hello-world" class="headerlink" title="Hello world"></a>Hello world</h3><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;Hello world&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Dart变量，常量，命名规则"><a href="#Dart变量，常量，命名规则" class="headerlink" title="Dart变量，常量，命名规则"></a>Dart变量，常量，命名规则</h3><h4 id="Dart变量"><a href="#Dart变量" class="headerlink" title="Dart变量"></a>Dart变量</h4><p>dart是一个强大的脚本类语言，可以不预先定义变量类型 ，自动会类型推倒。</p>
<p>dart中定义变量可以通过var关键字可以通过类型来申明变量，如：</p>
   <figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str=<span class="string">&#x27;this is var&#x27;</span>;</span><br><span class="line"><span class="built_in">String</span> str=<span class="string">&#x27;this is String&#x27;</span>;</span><br><span class="line"><span class="built_in">int</span> str=<span class="number">123</span>;</span><br></pre></td></tr></table></figure>

<h4 id="Dart常量"><a href="#Dart常量" class="headerlink" title="Dart常量"></a>Dart常量</h4><blockquote>
<p>final 和 const修饰符 </p>
</blockquote>
<p>const值不变 一开始就得赋值。</p>
<p>final 可以开始不赋值 只能赋一次 ; 而final不仅有const的编译时常量的特性，最重要的它是运行时常量，并且final是惰性初始化，即在运行时第一次使用前才初始化。</p>
<h4 id="Dart命名规则"><a href="#Dart命名规则" class="headerlink" title="Dart命名规则"></a>Dart命名规则</h4><ul>
<li>变量名称必须由数字、字母、下划线和美元符($)组成。</li>
<li>标识符开头不能是数字。</li>
<li>标识符不能是保留字和关键字。</li>
<li>变量的名字是区分大小写的。</li>
</ul>
<h3 id="Dart数据类型"><a href="#Dart数据类型" class="headerlink" title="Dart数据类型"></a>Dart数据类型</h3><p>​    Dart支持的数据类型有：</p>
<ul>
<li>int</li>
<li>double</li>
<li>String</li>
<li>bool</li>
<li>List</li>
<li>Map</li>
</ul>
<h4 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h4><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str1=<span class="string">&#x27;this is str1&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> str2=<span class="string">&quot;this is str2&quot;</span>;</span><br><span class="line"><span class="built_in">String</span> str1=<span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">  this is str1</span></span><br><span class="line"><span class="string">  this is str1</span></span><br><span class="line"><span class="string">  this is str1</span></span><br><span class="line"><span class="string">  &#x27;&#x27;&#x27;</span>;</span><br><span class="line"><span class="built_in">String</span> str1=<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    this is str1</span></span><br><span class="line"><span class="string">    this is str1</span></span><br><span class="line"><span class="string">    this is str1</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span>;</span><br><span class="line"><span class="comment">//字符串拼接</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;<span class="subst">$str1</span> <span class="subst">$str2</span>&quot;</span>);</span><br><span class="line"><span class="built_in">print</span>(str1 + str2);</span><br></pre></td></tr></table></figure>

<h4 id="数值类型"><a href="#数值类型" class="headerlink" title="数值类型"></a>数值类型</h4><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1、int   必须是整型</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="built_in">int</span> a=<span class="number">123</span>;</span><br><span class="line"></span><br><span class="line">  a=<span class="number">45</span>;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(a);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//2、double  既可以是整型 也可是浮点型</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">double</span> b=<span class="number">23.5</span>;</span><br><span class="line"></span><br><span class="line">  b=<span class="number">24</span>;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(b);</span><br></pre></td></tr></table></figure>

<h4 id="List类型"><a href="#List类型" class="headerlink" title="List类型"></a>List类型</h4><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1、第一种定义List的方式，不指定类型可以装任意类型。</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> l1=[<span class="string">&quot;张三&quot;</span>,<span class="number">20</span>,<span class="keyword">true</span>];</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(l1);  <span class="comment">//[张三, 20, true]</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(l1.length);  <span class="comment">//3</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(l1[<span class="number">0</span>]); <span class="comment">//张三</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(l1[<span class="number">1</span>]); <span class="comment">//20</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//2、第二种定义List的方式 指定类型</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> l2 = &lt;<span class="built_in">String</span>&gt;[<span class="string">&quot;张三&quot;</span>, <span class="string">&quot;李四&quot;</span>];</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(l2);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> l3 = &lt;<span class="built_in">int</span>&gt;[<span class="number">12</span>, <span class="number">30</span>];</span><br><span class="line">  <span class="built_in">print</span>(l3);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//3、第三种定义List的方式  增加数据 ,通过[]创建的集合它的容量可以变化</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> l4 = [];</span><br><span class="line">  <span class="built_in">print</span>(l4);</span><br><span class="line">  <span class="built_in">print</span>(l4.length);</span><br><span class="line"></span><br><span class="line">  l4.add(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">  l4.add(<span class="string">&quot;李四&quot;</span>);</span><br><span class="line">  l4.add(<span class="number">20</span>);</span><br><span class="line">  <span class="built_in">print</span>(l4);</span><br><span class="line">  <span class="built_in">print</span>(l4.length);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> l5 = [<span class="string">&quot;张三&quot;</span>, <span class="number">20</span>, <span class="keyword">true</span>];</span><br><span class="line">  l5.add(<span class="string">&quot;李四&quot;</span>);</span><br><span class="line">  l5.add(<span class="string">&quot;zhaosi&quot;</span>);</span><br><span class="line">  <span class="built_in">print</span>(l5);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//4、第四种定义List的方式</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> l6 = <span class="built_in">List</span>.filled(<span class="number">2</span>, <span class="string">&quot;1&quot;</span>); <span class="comment">//创建一个 固定 长度为2的集合,填充“1”</span></span><br><span class="line">  <span class="built_in">print</span>(l6);<span class="comment">//[1,1]</span></span><br><span class="line">  <span class="built_in">print</span>(l6[<span class="number">0</span>]);<span class="comment">//1</span></span><br><span class="line"></span><br><span class="line">  l6[<span class="number">0</span>]=<span class="string">&quot;张三&quot;</span>;   <span class="comment">//修改集合的内容</span></span><br><span class="line">  l6[<span class="number">1</span>]=<span class="string">&quot;李四&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(l6);  <span class="comment">//[张三, 李四]</span></span><br><span class="line"></span><br><span class="line">  l6.add(<span class="string">&quot;王五&quot;</span>);  <span class="comment">//错误写法，不能修改长度</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//通过List.filled创建的集合长度是固定</span></span><br><span class="line">  <span class="keyword">var</span> l6=<span class="built_in">List</span>.filled(<span class="number">2</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="built_in">print</span>(l6.length);</span><br><span class="line">  l6.length=<span class="number">0</span>;  <span class="comment">//修改集合的长度   报错</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> l7 = &lt;<span class="built_in">String</span>&gt;[<span class="string">&quot;张三&quot;</span>, <span class="string">&quot;李四&quot;</span>];</span><br><span class="line">  <span class="built_in">print</span>(l7.length); <span class="comment">//2</span></span><br><span class="line">  l7.length = <span class="number">0</span>; <span class="comment">//可以改变的</span></span><br><span class="line">  <span class="built_in">print</span>(l7); <span class="comment">//[]</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> l8 = <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt;.filled(<span class="number">2</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">  l8[<span class="number">0</span>] = <span class="string">&quot;string&quot;</span>;</span><br><span class="line">  l8[<span class="number">0</span>]=<span class="number">222</span>;</span><br><span class="line">  <span class="built_in">print</span>(l8);</span><br></pre></td></tr></table></figure>

<h4 id="Map类型"><a href="#Map类型" class="headerlink" title="Map类型"></a>Map类型</h4><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">//第一种定义 Maps的方式</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> person = &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="string">&quot;age&quot;</span>: <span class="number">20</span>,</span><br><span class="line">    <span class="string">&quot;work&quot;</span>: [<span class="string">&quot;程序员&quot;</span>, <span class="string">&quot;送外卖&quot;</span>]</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(person);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(person[<span class="string">&quot;name&quot;</span>]);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(person[<span class="string">&quot;age&quot;</span>]);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(person[<span class="string">&quot;work&quot;</span>]);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//第二种定义 Maps的方式</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> p = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"></span><br><span class="line">  p[<span class="string">&quot;name&quot;</span>] = <span class="string">&quot;李四&quot;</span>;</span><br><span class="line">  p[<span class="string">&quot;age&quot;</span>] = <span class="number">22</span>;</span><br><span class="line">  p[<span class="string">&quot;work&quot;</span>] = [<span class="string">&quot;程序员&quot;</span>, <span class="string">&quot;送外卖&quot;</span>];</span><br><span class="line">  <span class="built_in">print</span>(p);</span><br><span class="line">  <span class="built_in">print</span>(p[<span class="string">&quot;age&quot;</span>]);</span><br></pre></td></tr></table></figure>

<h4 id="类型判断"><a href="#类型判断" class="headerlink" title="类型判断"></a>类型判断</h4><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str=<span class="number">123</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(str <span class="keyword">is</span> <span class="built_in">String</span>)&#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;是string类型&#x27;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(str <span class="keyword">is</span> <span class="built_in">int</span>)&#123;</span><br><span class="line"></span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&#x27;int&#x27;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&#x27;其他类型&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Dart类的继承"><a href="#Dart类的继承" class="headerlink" title="Dart类的继承"></a>Dart类的继承</h3><p>Dart中的类的继承：  </p>
<ul>
<li>子类使用extends关键词来继承父类</li>
<li>子类会继承父类里面可见的属性和方法 但是不会继承构造函数 </li>
<li>子类能复写父类的方法 getter和setter</li>
</ul>
<h4 id="简单继承"><a href="#简单继承" class="headerlink" title="简单继承"></a>简单继承</h4><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> name=<span class="string">&#x27;张三&#x27;</span>;</span><br><span class="line">  <span class="built_in">num</span> age=<span class="number">20</span>; </span><br><span class="line">  <span class="keyword">void</span> printInfo() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>---<span class="subst">$&#123;<span class="keyword">this</span>.age&#125;</span>&quot;</span>);  </span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Web</span> <span class="keyword">extends</span> <span class="title">Person</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main()&#123;   </span><br><span class="line"></span><br><span class="line">  Web w=<span class="keyword">new</span> Web();</span><br><span class="line">  <span class="built_in">print</span>(w.name);</span><br><span class="line">  w.printInfo();</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Super关键词"><a href="#Super关键词" class="headerlink" title="Super关键词"></a>Super关键词</h4><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">late</span> <span class="built_in">String</span> name;</span><br><span class="line">  <span class="keyword">late</span> <span class="built_in">num</span> age; </span><br><span class="line">  Person(<span class="keyword">this</span>.name,<span class="keyword">this</span>.age);</span><br><span class="line">  <span class="keyword">void</span> printInfo() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>---<span class="subst">$&#123;<span class="keyword">this</span>.age&#125;</span>&quot;</span>);  </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Web</span> <span class="keyword">extends</span> <span class="title">Person</span></span>&#123;</span><br><span class="line"><span class="comment">//: 之后的代码块会在构造函数的具体代码内容执行之前执行</span></span><br><span class="line">  Web(<span class="built_in">String</span> name, <span class="built_in">num</span> age) : <span class="keyword">super</span>(name, age)&#123;</span><br><span class="line">    </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main()&#123; </span><br><span class="line">  Web w=<span class="keyword">new</span> Web(<span class="string">&#x27;张三&#x27;</span>, <span class="number">12</span>);</span><br><span class="line">  w.printInfo();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//==========================================</span></span><br><span class="line"><span class="comment">//继承并构建自己的属性和方法</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Web</span> <span class="keyword">extends</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">  <span class="keyword">late</span> <span class="built_in">String</span> sex;</span><br><span class="line">  Web(<span class="built_in">String</span> name, <span class="built_in">num</span> age,<span class="built_in">String</span> sex) : <span class="keyword">super</span>(name, age)&#123;</span><br><span class="line">    <span class="keyword">this</span>.sex=sex;</span><br><span class="line">  &#125;</span><br><span class="line">  run()&#123;</span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>---<span class="subst">$&#123;<span class="keyword">this</span>.age&#125;</span>--<span class="subst">$&#123;<span class="keyword">this</span>.sex&#125;</span>&quot;</span>);  </span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main()&#123; </span><br><span class="line"></span><br><span class="line">  Web w=<span class="keyword">new</span> Web(<span class="string">&#x27;张三&#x27;</span>, <span class="number">12</span>,<span class="string">&quot;男&quot;</span>);</span><br><span class="line"></span><br><span class="line">  w.printInfo();</span><br><span class="line"></span><br><span class="line">  w.run();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="方法的重写"><a href="#方法的重写" class="headerlink" title="方法的重写"></a>方法的重写</h4><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> name;</span><br><span class="line">  <span class="built_in">num</span> age;</span><br><span class="line">  Person(<span class="keyword">this</span>.name, <span class="keyword">this</span>.age);</span><br><span class="line">  <span class="keyword">void</span> printInfo() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>---<span class="subst">$&#123;<span class="keyword">this</span>.age&#125;</span>&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> work() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>在工作...&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Web</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  Web(<span class="built_in">String</span> name, <span class="built_in">num</span> age) : <span class="keyword">super</span>(name, age);</span><br><span class="line"></span><br><span class="line">  run() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;run&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//覆写父类的方法</span></span><br><span class="line">  <span class="meta">@override</span> </span><br><span class="line">  <span class="keyword">void</span> printInfo() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;姓名：<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>---年龄：<span class="subst">$&#123;<span class="keyword">this</span>.age&#125;</span>&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> work() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>的工作是写代码&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main() &#123;</span><br><span class="line">  Web w = <span class="keyword">new</span> Web(<span class="string">&#x27;李四&#x27;</span>, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">  w.printInfo();</span><br><span class="line"></span><br><span class="line">  w.work();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Dart-抽象类，多态，接口"><a href="#Dart-抽象类，多态，接口" class="headerlink" title="Dart 抽象类，多态，接口"></a>Dart 抽象类，多态，接口</h3><p>Dart中抽象类: Dart抽象类主要用于定义标准，子类可以继承抽象类，也可以实现抽象类接口。</p>
<ul>
<li><p>抽象类通过abstract 关键字来定义</p>
</li>
<li><p>Dart中的抽象方法不能用abstract声明，Dart中没有方法体的方法我们称为抽象方法。</p>
</li>
<li><p>如果子类（非抽象类）继承抽象类必须得实现里面的抽象方法</p>
</li>
<li><p>如果把抽象类当做接口实现的话必须得实现抽象类里面定义的所有属性和方法。</p>
</li>
<li><p>抽象类不能被实例化，只有继承它的子类（非抽象类）可以</p>
</li>
</ul>
<p>extends抽象类 和 implements的区别：</p>
<ul>
<li><p>如果要复用抽象类里面的方法，并且要用抽象方法约束自类的话我们就用extends继承抽象类</p>
</li>
<li><p>如果只是把抽象类当做标准的话我们就用implements实现抽象类</p>
</li>
</ul>
<h4 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h4><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span></span>&#123;</span><br><span class="line">  eat();   <span class="comment">//抽象方法</span></span><br><span class="line">  run();  <span class="comment">//抽象方法  </span></span><br><span class="line">  printInfo()&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;我是一个抽象类里面的普通方法&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  eat() &#123;</span><br><span class="line">     <span class="built_in">print</span>(<span class="string">&#x27;小狗在吃骨头&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  run() &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement run</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;小狗在跑&#x27;</span>);</span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  eat() &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement eat</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;小猫在吃老鼠&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  run() &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement run</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;小猫在跑&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main()&#123;</span><br><span class="line">  Dog d=<span class="keyword">new</span> Dog();</span><br><span class="line">  d.eat();</span><br><span class="line">  d.printInfo();</span><br><span class="line"></span><br><span class="line">   Cat c=<span class="keyword">new</span> Cat();</span><br><span class="line">  c.eat();</span><br><span class="line">  c.printInfo();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Animal a=new Animal();   //抽象类没法直接被实例化</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h4><p>Datr中的多态：</p>
<ul>
<li><p>允许将子类类型的指针赋值给父类类型的指针, 同一个函数调用会有不同的执行效果 。</p>
</li>
<li><p>子类的实例赋值给父类的引用。</p>
</li>
</ul>
<p><strong>多态就是父类定义一个方法不去实现，让继承他的子类去实现，每个子类有不同的表现。</strong></p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span></span>&#123;</span><br><span class="line">  eat();   <span class="comment">//抽象方法 </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  eat() &#123;</span><br><span class="line">     <span class="built_in">print</span>(<span class="string">&#x27;小狗在吃骨头&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  run()&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;run&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  eat() &#123;   </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;小猫在吃老鼠&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  run()&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;run&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main()&#123;</span><br><span class="line"></span><br><span class="line">  Animal d=<span class="keyword">new</span> Dog();</span><br><span class="line">  d.eat();</span><br><span class="line"></span><br><span class="line">  Animal c=<span class="keyword">new</span> Cat();</span><br><span class="line">  c.eat();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h4><p>和Java一样，dart也有接口，但是和Java还是有区别的。</p>
<p>首先，dart的接口没有interface关键字定义接口，而是普通类或抽象类都可以作为接口被实现。</p>
<p>同样使用implements关键字进行实现。</p>
<p>但是dart的接口有点奇怪，如果实现的类是普通类，会将普通类和抽象中的属性的方法全部需要覆写一遍。</p>
<p>而因为抽象类可以定义抽象方法，普通类不可以，所以一般如果要实现像Java接口那样的方式，一般会使用抽象类。</p>
<p>建议使用抽象类定义接口。</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Db</span> </span>&#123;</span><br><span class="line">  <span class="comment">//当做接口   接口：就是约定 、规范</span></span><br><span class="line">  <span class="keyword">late</span> <span class="built_in">String</span> uri; <span class="comment">//数据库的链接地址</span></span><br><span class="line">  add(<span class="built_in">String</span> data);</span><br><span class="line">  save();</span><br><span class="line">  delete();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mysql</span> <span class="keyword">implements</span> <span class="title">Db</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">String</span> uri;</span><br><span class="line"></span><br><span class="line">  Mysql(<span class="keyword">this</span>.uri);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  add(data) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;这是mysql的add方法&#x27;</span> + data);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  delete() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  save() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  remove() &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MsSql</span> <span class="keyword">implements</span> <span class="title">Db</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">late</span> <span class="built_in">String</span> uri;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  add(<span class="built_in">String</span> data) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;这是mssql的add方法&#x27;</span> + data);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  delete() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  save() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main() &#123;</span><br><span class="line">  Mysql mysql = <span class="keyword">new</span> Mysql(<span class="string">&#x27;xxxxxx&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  mysql.add(<span class="string">&#x27;1243214&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="接口文件分离"><a href="#接口文件分离" class="headerlink" title="接口文件分离"></a>接口文件分离</h4><ol>
<li>将Db，Mysql，Mssql分别写入各自的文件中并且放入lib文件夹下</li>
<li>在需要的时候引入类文件</li>
</ol>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;lib/MsSql.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line">main() &#123;</span><br><span class="line">  <span class="comment">// Mysql mysql=new Mysql(&#x27;xxxxxx&#x27;);</span></span><br><span class="line">  <span class="comment">// mysql.add(&#x27;1243214&#x27;);</span></span><br><span class="line"></span><br><span class="line">  MsSql mssql = <span class="keyword">new</span> MsSql();</span><br><span class="line">  mssql.uri = <span class="string">&#x27;127.0.0.1&#x27;</span>;</span><br><span class="line">  mssql.add(<span class="string">&#x27;增加的数据&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="实现多个接口"><a href="#实现多个接口" class="headerlink" title="实现多个接口"></a>实现多个接口</h4><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">  <span class="keyword">late</span> <span class="built_in">String</span> name;</span><br><span class="line">  printA();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">B</span> </span>&#123;</span><br><span class="line">  printB();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">implements</span> <span class="title">A</span>, <span class="title">B</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">late</span> <span class="built_in">String</span> name;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  printA() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;printA&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  printB() &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement printB</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  C c = <span class="keyword">new</span> C();</span><br><span class="line">  c.printA();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Mixins混入"><a href="#Mixins混入" class="headerlink" title="Mixins混入"></a>Mixins混入</h3><p>mixins的中文意思是混入，就是混合多个类其他功能。</p>
<p>在Dart中可以使用mixins实现类似多继承的功能</p>
<p>因为mixins使用的条件，随着Dart版本一直在变，这里讲的是Dart2.x中使用mixins的条件：</p>
<ul>
<li><p>作为mixins的类只能直接继承自Object，不能继承其他类，不能是mixins之后的类。</p>
</li>
<li><p>作为mixins的类不能有构造函数</p>
</li>
<li><p>mixins绝不是继承，也不是接口，而是一种全新的特性</p>
</li>
<li><p>mixins之后的类的示例对象是所有参与mixins类的子类</p>
</li>
</ul>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> info = <span class="string">&quot;this is A&quot;</span>;</span><br><span class="line">  <span class="keyword">void</span> printA() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> printB() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="title">with</span> <span class="title">A</span>, <span class="title">B</span> </span>&#123;&#125;<span class="comment">//with关键词实现mixins</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> c = <span class="keyword">new</span> C();</span><br><span class="line">  c.printA();</span><br><span class="line">  c.printB();</span><br><span class="line">  <span class="built_in">print</span>(c.info);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> name;</span><br><span class="line">  <span class="built_in">num</span> age;</span><br><span class="line">  Person(<span class="keyword">this</span>.name, <span class="keyword">this</span>.age);</span><br><span class="line">  printInfo() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>----<span class="subst">$&#123;<span class="keyword">this</span>.age&#125;</span>&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> run() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Person Run&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> info = <span class="string">&quot;this is A&quot;</span>;</span><br><span class="line">  <span class="keyword">void</span> printA() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> run() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;A Run&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> printB() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> run() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;B Run&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">extends</span> <span class="title">Person</span> <span class="title">with</span> <span class="title">B</span>, <span class="title">A</span> </span>&#123;</span><br><span class="line">  C(<span class="built_in">String</span> name, <span class="built_in">num</span> age) : <span class="keyword">super</span>(name, age);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> c = <span class="keyword">new</span> C(<span class="string">&#x27;张三&#x27;</span>, <span class="number">20</span>);</span><br><span class="line">  c.printInfo();</span><br><span class="line">  c.printB();</span><br><span class="line">  <span class="built_in">print</span>(c.info);</span><br><span class="line"></span><br><span class="line">  c.run();<span class="comment">//混合类还有继承类如果有相同的方法后面的方法会替换前面的方法，在这里是A.run</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Dart泛型"><a href="#Dart泛型" class="headerlink" title="Dart泛型"></a>Dart泛型</h3><h4 id="泛型方法"><a href="#泛型方法" class="headerlink" title="泛型方法"></a>泛型方法</h4><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">T getData&lt;T&gt;(T value) &#123;</span><br><span class="line">  <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(getData(<span class="string">&#x27;xxx&#x27;</span>));</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(getData&lt;<span class="built_in">int</span>&gt;(<span class="number">12</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="泛型类"><a href="#泛型类" class="headerlink" title="泛型类"></a>泛型类</h4><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyList</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">List</span> list = &lt;T&gt;[];</span><br><span class="line">  <span class="keyword">void</span> add(T value) &#123;</span><br><span class="line">    <span class="keyword">this</span>.list.add(value);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">List</span> getList() &#123;</span><br><span class="line">    <span class="keyword">return</span> list;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main() &#123;</span><br><span class="line">  MyList l1 = <span class="keyword">new</span> MyList();</span><br><span class="line">  l1.add(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">  l1.add(<span class="number">12</span>);</span><br><span class="line">  l1.add(<span class="keyword">true</span>);</span><br><span class="line">  <span class="built_in">print</span>(l1.getList());</span><br><span class="line"></span><br><span class="line">  MyList l2 = <span class="keyword">new</span> MyList&lt;<span class="built_in">String</span>&gt;();</span><br><span class="line">  l2.add(<span class="string">&quot;张三1&quot;</span>);</span><br><span class="line">  <span class="comment">// l2.add(11);  //错误的写法</span></span><br><span class="line">  <span class="built_in">print</span>(l2.getList());</span><br><span class="line"></span><br><span class="line">  MyList l3 = <span class="keyword">new</span> MyList&lt;<span class="built_in">int</span>&gt;();</span><br><span class="line">  l3.add(<span class="number">11</span>);</span><br><span class="line">  l3.add(<span class="number">12</span>);</span><br><span class="line">  <span class="comment">//l3.add(&quot;aaaa&quot;);//报错</span></span><br><span class="line">  <span class="built_in">print</span>(l3.getList());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="泛型接口"><a href="#泛型接口" class="headerlink" title="泛型接口"></a>泛型接口</h4><p>Dart中的泛型接口在实现时实现类也要是泛型类。</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Cache</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  getByKey(<span class="built_in">String</span> key);</span><br><span class="line">  <span class="keyword">void</span> setByKey(<span class="built_in">String</span> key, T value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FlieCache</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">Cache</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  getByKey(<span class="built_in">String</span> key) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> setByKey(<span class="built_in">String</span> key, T value) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;我是文件缓存 把key=<span class="subst">$&#123;key&#125;</span>  value=<span class="subst">$&#123;value&#125;</span>的数据写入到了文件中&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MemoryCache</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">Cache</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  getByKey(<span class="built_in">String</span> key) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> setByKey(<span class="built_in">String</span> key, T value) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;我是内存缓存 把key=<span class="subst">$&#123;key&#125;</span>  value=<span class="subst">$&#123;value&#125;</span> -写入到了内存中&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="comment">// MemoryCache m=new MemoryCache&lt;String&gt;();</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//  m.setByKey(&#x27;index&#x27;, &#x27;首页数据&#x27;);</span></span><br><span class="line"></span><br><span class="line">  Cache m = <span class="keyword">new</span> MemoryCache&lt;<span class="built_in">Map</span>&gt;();</span><br><span class="line"></span><br><span class="line">  m.setByKey(<span class="string">&#x27;index&#x27;</span>, &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;张三&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">20</span>&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Dart库"><a href="#Dart库" class="headerlink" title="Dart库"></a>Dart库</h3><p>前面介绍Dart基础知识的时候基本上都是在一个文件里面编写Dart代码的，但实际开发中不可能这么写，模块化很重要，所以这就需要使用到库的概念。</p>
<p>在Dart中，库的使用时通过import关键字引入的。</p>
<p>library指令可以创建一个库，每个Dart文件都是一个库，即使没有使用library指令来指定。</p>
<p>Dart中的库主要有三种：</p>
<p>​    1、我们自定义的库     </p>
<p>​          import ‘lib/xxx.dart’;</p>
<p>​    2、系统内置库       </p>
<p>​          import ‘dart:math’;    </p>
<p>​          import ‘dart:io’; </p>
<p>​          import ‘dart:convert’;</p>
<p>​    3、Pub包管理系统中的库  </p>
<p>​        <a href="https://pub.dev/packages">https://pub.dev/packages</a></p>
<p>​        <a href="https://pub.flutter-io.cn/packages">https://pub.flutter-io.cn/packages</a></p>
<p>​        <a href="https://pub.dartlang.org/flutter/">https://pub.dartlang.org/flutter/</a></p>
<p>​        1、需要在自己想项目根目录新建一个pubspec.yaml</p>
<p>​        2、在pubspec.yaml文件 然后配置名称 、描述、环境、依赖等信息，如：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">xxx</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">A</span> <span class="string">new</span> <span class="string">flutter</span> <span class="string">module</span> <span class="string">project.</span></span><br><span class="line"><span class="attr">environment:</span></span><br><span class="line">  <span class="attr">sdk:</span> <span class="string">&#x27;&gt;=2.10.0 &lt;3.0.0&#x27;</span></span><br><span class="line"><span class="comment">#dependencies:</span></span><br><span class="line">  <span class="comment">#http: ^0.12.0+2</span></span><br><span class="line">  <span class="comment">#date_format: ^1.0.6</span></span><br></pre></td></tr></table></figure>

<p><a href="https://blog.csdn.net/mengks1987/article/details/109500041">参考资料</a></p>
<p>​        3、然后运行 pub get 获取包下载到本地  </p>
<ul>
<li>或者使用 <code>dart pub add http</code> <code>flutter pub add http</code>添加依赖</li>
</ul>
<p>​        4、项目中引入库 import ‘package:http/http.dart’ as http; 看文档使用</p>
<h4 id="库冲突解决"><a href="#库冲突解决" class="headerlink" title="库冲突解决"></a>库冲突解决</h4><p>当引入两个库中有相同名称标识符的时候（如同时存在同名的类），如果是java通常我们通过写上完整的包名路径来指定使用的具体标识符，甚至不用import都可以，但是Dart里面是必须import的。当冲突的时候，可以使用as关键字来指定库的前缀。如下例子所示：</p>
<pre><code><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:lib1/lib1.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:lib2/lib2.dart&#x27;</span> <span class="keyword">as</span> lib2;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Element</span> element1 = <span class="keyword">new</span> <span class="built_in">Element</span>();           <span class="comment">// Uses Element from lib1.</span></span><br><span class="line"></span><br><span class="line">lib2.<span class="built_in">Element</span> element2 = <span class="keyword">new</span> lib2.<span class="built_in">Element</span>(); <span class="comment">// Uses Element from lib2.</span></span><br><span class="line">​    ```</span><br><span class="line"></span><br><span class="line">#### 库部分导入</span><br><span class="line"></span><br><span class="line">部分导入</span><br><span class="line"></span><br><span class="line">  如果只需要导入库的一部分，有两种模式：</span><br><span class="line"></span><br><span class="line">​     模式一：只导入需要的部分，使用<span class="keyword">show</span>关键字，如下例子所示：</span><br><span class="line"></span><br><span class="line">​     `<span class="keyword">import</span> <span class="string">&#x27;package:lib1/lib1.dart&#x27;</span> <span class="keyword">show</span> foo;`</span><br><span class="line"></span><br><span class="line">​     模式二：隐藏不需要的部分，使用<span class="keyword">hide</span>关键字，如下例子所示：</span><br><span class="line"></span><br><span class="line">​     ` <span class="keyword">import</span> <span class="string">&#x27;package:lib2/lib2.dart&#x27;</span> <span class="keyword">hide</span> foo; ` </span><br><span class="line"></span><br><span class="line">#### 延迟加载</span><br><span class="line"></span><br><span class="line">```dart</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">延迟加载</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    也称为懒加载，可以在需要的时候再进行加载。</span></span><br><span class="line"><span class="comment">    懒加载的最大好处是可以减少APP的启动时间。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    懒加载使用deferred as关键字来指定，如下例子所示：</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    import &#x27;package:deferred/hello.dart&#x27; deferred as hello;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    当需要使用的时候，需要使用loadLibrary()方法来加载：</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    greet() async &#123;</span></span><br><span class="line"><span class="comment">      await hello.loadLibrary();</span></span><br><span class="line"><span class="comment">      hello.printGreeting();</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
</code></pre>
<h4 id="分库"><a href="#分库" class="headerlink" title="分库"></a>分库</h4><p>dart中，通过使用part、part of、library来实现拆分库，这样，就可以将一个庞大的库拆分成各种小库，只要引用主库即可，用法如下：</p>
<p>假设有三个文件，两个子库calculator和logger，一个主库util  </p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">//calculator.dart代码：</span></span><br><span class="line"><span class="comment">//和主库建立连接</span></span><br><span class="line"><span class="keyword">part</span> of util;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> add(<span class="built_in">int</span> i, <span class="built_in">int</span> j) &#123;</span><br><span class="line">  <span class="keyword">return</span> i + j;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> sub(<span class="built_in">int</span> i, <span class="built_in">int</span> j) &#123;</span><br><span class="line">  <span class="keyword">return</span> i - j;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> random(<span class="built_in">int</span> no) &#123;</span><br><span class="line">  <span class="keyword">return</span> Random().nextInt(no);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//========================================</span></span><br><span class="line"><span class="comment">//logger.dart代码：</span></span><br><span class="line"><span class="comment">//和主库建立连接</span></span><br><span class="line"><span class="keyword">part</span> of util;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Logger</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> _app_name;</span><br><span class="line">  Logger(<span class="keyword">this</span>._app_name);</span><br><span class="line">  <span class="keyword">void</span> error(error) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;<span class="subst">$&#123;_app_name&#125;</span>Error:<span class="subst">$&#123;error&#125;</span>&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> warn(msg) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;<span class="subst">$&#123;_app_name&#125;</span>Error:<span class="subst">$&#123;msg&#125;</span>&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> debug(msg) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;<span class="subst">$&#123;_app_name&#125;</span>Error:<span class="subst">$&#123;msg&#125;</span>&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//=========================================</span></span><br><span class="line"><span class="comment">//主库util.dart代码：</span></span><br><span class="line"><span class="comment">//给库命名</span></span><br><span class="line"><span class="keyword">library</span> util;</span><br><span class="line"></span><br><span class="line"><span class="comment">//导入math，子库用到</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;dart:math&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//和子库建立联系</span></span><br><span class="line"><span class="keyword">part</span> <span class="string">&#x27;logger.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">part</span> <span class="string">&#x27;calculator.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//===========================================</span></span><br><span class="line"><span class="comment">//使用：</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./util.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="comment">//使用logger库定义的类</span></span><br><span class="line">  Logger logger = Logger(<span class="string">&#x27;Demo&#x27;</span>);</span><br><span class="line">  logger.debug(<span class="string">&#x27;这是debug信息&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//使用calculator库定义的方法</span></span><br><span class="line">  <span class="built_in">print</span>(add(<span class="number">1</span>, <span class="number">2</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="Dart异步"><a href="#Dart异步" class="headerlink" title="Dart异步"></a>Dart异步</h3><blockquote>
<p> async和await关键词</p>
</blockquote>
<p>这两个关键字的使用只需要记住两点：</p>
<ul>
<li><p>只有async方法才能使用await关键字调用方法</p>
</li>
<li><p>如果调用别的async方法可以使用await关键字等待完成</p>
</li>
</ul>
<p>async是让方法变成异步。</p>
<p>await是等待异步方法执行完成。（如果不需要立刻获得异步方法的值，则可以不用）</p>
<h3 id="Dart2-13之后新特性"><a href="#Dart2-13之后新特性" class="headerlink" title="Dart2.13之后新特性"></a>Dart2.13之后新特性</h3><h4 id="Null-safety，可空类型，非空断言"><a href="#Null-safety，可空类型，非空断言" class="headerlink" title="Null safety，可空类型，非空断言"></a>Null safety，可空类型，非空断言</h4><p>Null safety翻译成中文的意思是空安全。</p>
<p>null safety 可以帮助开发者避免一些日常开发中很难被发现的错误，并且额外的好处是可以改善性能。</p>
<p>Flutter2.2.0（2021年5月19日发布） 之后的版本都要求使用null safety。</p>
<blockquote>
<p>? 可空类型，加在类型后，如<code>int? a = null</code></p>
</blockquote>
<blockquote>
<p>! 类型断言，<code>print(str!.length);</code> 如果str不等于null 会打印str的长度，如果等于null会抛出异常，可以catch这个异常。</p>
</blockquote>
<h4 id="late"><a href="#late" class="headerlink" title="late"></a>late</h4><blockquote>
<p>late 关键字主要用于延迟初始化。</p>
</blockquote>
<h4 id="required"><a href="#required" class="headerlink" title="required"></a>required</h4><p>required关键词:</p>
<ul>
<li><p>最开始 @required 是注解</p>
</li>
<li><p>现在它已经作为内置修饰符。</p>
</li>
<li><p>主要用于允许根据需要标记任何<code>命名参数</code>(带{}，调用时要指定名)（函数或类），使得它们不为空。因为可选参数中必须有个 required 参数或者该参数有个默认值。</p>
</li>
<li><p><code>String printInfo(String username, &#123;required int age, required String sex&#125;) &#123;&#125;</code></p>
</li>
<li><pre><code class="dart">class Person &#123;
  String name;
  int age;
  Person(&#123;required this.name,required this.age&#125;);  //表示 name 和age 必须传入

  String getName() &#123;
    return &quot;$&#123;this.name&#125;---$&#123;this.age&#125;&quot;;
  &#125;
&#125;
void main(args) &#123;
   Person p=new Person(
     name: &quot;张三&quot;,
     age: 20
   );
   print(p.getName());
&#125;
</code></pre>
</li>
</ul>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><p><a href="https://dart.dev/">Dart官网</a></p>
<p><a href="dart.cn">中文官网</a></p>
]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
  </entry>
  <entry>
    <title>每日英语单词</title>
    <url>/2021/10/11/%E8%8B%B1%E8%AF%AD/</url>
    <content><![CDATA[<p>每日单词记录</p>
<span id="more"></span>

<blockquote>
<p> 2021/10/11</p>
</blockquote>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>rank</td>
<td><code>v</code>排名，把…分等级 <code>n</code>等级，级别<code>adj</code>繁茂的</td>
</tr>
<tr>
<td>bonus</td>
<td><code>n</code> 奖金，额外津贴</td>
</tr>
<tr>
<td>requirement</td>
<td><code>n</code> 要求，需求，必需品</td>
</tr>
<tr>
<td>infrared</td>
<td><code>adj</code> 红外线的<code>n</code> 红外线</td>
</tr>
<tr>
<td>contact</td>
<td><code>v</code> <code>n</code> 联系</td>
</tr>
<tr>
<td>oblige</td>
<td><code>v</code> 迫使，使感激，使…成为必要</td>
</tr>
<tr>
<td>reckon</td>
<td><code>vt</code> 估算，认为</td>
</tr>
<tr>
<td>deputy</td>
<td><code>n</code> 代表</td>
</tr>
<tr>
<td>interact</td>
<td><code>v</code> 交流，互动</td>
</tr>
<tr>
<td>concern</td>
<td><code>n</code> 关心 <code>v</code> 感兴趣</td>
</tr>
<tr>
<td>compile</td>
<td><code>v</code> 收集，汇编</td>
</tr>
<tr>
<td>foundation</td>
<td><code> n</code> 地基，基金会</td>
</tr>
<tr>
<td>forth</td>
<td><code>adv</code> 向前，离去</td>
</tr>
<tr>
<td>remark</td>
<td><code>n</code> <code>v</code> 评论，议论</td>
</tr>
<tr>
<td>prudent</td>
<td><code>adj</code> 谨慎的，精明的</td>
</tr>
<tr>
<td>specialist</td>
<td><code>n</code>专家<code>adj</code> 专家的</td>
</tr>
<tr>
<td>failure</td>
<td><code>n</code> 失败</td>
</tr>
<tr>
<td>medium</td>
<td><code>adj</code> 中等的<code>n</code> 手段，方法，媒介，材料</td>
</tr>
<tr>
<td>eminent</td>
<td><code>adj</code>杰出的</td>
</tr>
<tr>
<td>shallow</td>
<td><code>adj</code>浅的，肤浅的<code>v</code> 变浅，使变浅</td>
</tr>
</tbody></table>
<hr>
<blockquote>
<p>2021/10/12</p>
</blockquote>
<hr>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>intense</td>
<td><code>adj</code> 强烈的，激烈的，紧张的，认真的，热情的</td>
</tr>
<tr>
<td>offspring</td>
<td><code>n</code> 后代</td>
</tr>
<tr>
<td>expand</td>
<td><code>v</code> 扩大，扩张</td>
</tr>
<tr>
<td>pump</td>
<td><code>v</code>抽取，抽水 <code>n</code> 打气筒，水泵</td>
</tr>
<tr>
<td>upward</td>
<td><code>adj</code> <code>adv</code> 向上的、向上地</td>
</tr>
<tr>
<td>sightseeing</td>
<td><code>n</code> 旅游，观光</td>
</tr>
<tr>
<td>aspire</td>
<td><code>vi</code> 立志于，渴望于</td>
</tr>
<tr>
<td>economical</td>
<td><code>adj</code> 经济的，节约的</td>
</tr>
<tr>
<td>harsh</td>
<td><code>adj</code> 刺耳的</td>
</tr>
<tr>
<td>recovery</td>
<td><code>n</code> 痊愈，复苏，恢复</td>
</tr>
<tr>
<td>stationary</td>
<td><code>adj</code> 静止的</td>
</tr>
<tr>
<td>adopt</td>
<td><code>v</code> 收养</td>
</tr>
<tr>
<td>statue</td>
<td><code>n</code> 雕像</td>
</tr>
<tr>
<td>bundle</td>
<td><code>n</code> 一捆，一把</td>
</tr>
<tr>
<td>prime</td>
<td><code>adj</code>主要的 <code>n</code> 青春</td>
</tr>
<tr>
<td>majesty</td>
<td><code>n</code> 王权，雄伟，壮丽</td>
</tr>
<tr>
<td>accurate</td>
<td><code>adj</code> 精确的</td>
</tr>
<tr>
<td>integral</td>
<td><code>adj</code>必需的，基本的</td>
</tr>
<tr>
<td>conduct</td>
<td><code>v</code>指挥，引导<code>n</code>行为举止</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>English</category>
      </categories>
  </entry>
  <entry>
    <title>JAVA设计模式</title>
    <url>/2021/10/11/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
    <content><![CDATA[<p>设计模式（Design pattern）代表了最佳的实践，通常被有经验的面向对象的软件开发人员所采用。设计模式是软件开发人员在软件开发过程中面临的一般问题的解决方案。这些解决方案是众多软件开发人员经过相当长的一段时间的试验和错误总结出来的。</p>
<span id="more"></span>

<h2 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h2><hr>
<h3 id="2021-10-9-单例模式"><a href="#2021-10-9-单例模式" class="headerlink" title="2021/10/9 单例模式"></a><code>2021/10/9</code> 单例模式</h3><hr>
<h4 id="1-定义"><a href="#1-定义" class="headerlink" title="1.定义"></a>1.定义</h4><ul>
<li><p>一个类仅有一个实例</p>
</li>
<li><p>提供一个访问这个实例的方法</p>
</li>
<li><blockquote>
<p>注意只在同一个JVM中才起作用</p>
</blockquote>
</li>
</ul>
<h4 id="2-实现关键"><a href="#2-实现关键" class="headerlink" title="2.实现关键"></a>2.实现关键</h4><ul>
<li>私有构造函数    <code>防止别人直接构造，维持单例</code></li>
<li>私有静态变量维护对象实例    <code>为了保存创建的单例对象，单例不应该销毁</code></li>
<li>公共静态方法提供获取实例    <code>提供获取单例的方法</code></li>
</ul>
<h4 id="3-实现方式"><a href="#3-实现方式" class="headerlink" title="3.实现方式"></a>3.实现方式</h4><ul>
<li><strong>懒汉式</strong>。代码简单易读，延时加载对象实例，但是非线程安全，不能用在多线程环境中。这种代码仅能作为讲解学习代码，严重反对在实际软件中使用。<code>线程不安全，一瞬间的高并发可能产生多个‘单例’</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonLazy</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. 私有静态变量维护当前对象实例</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SingletonLazy instance = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1. 私有构造函数</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">SingletonLazy</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3. 公有静态方法，获取对象实例</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SingletonLazy <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line"></span><br><span class="line">            instance = <span class="keyword">new</span> SingletonLazy();</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>双重检查锁</strong>。这种代码是懒汉式的优化，具备懒汉式的优点，同时增加线程同步锁和双重检查机制，可以在多线程环境中使用。调用效率一般，但是依赖JVM的底层模型，不同JVM版本或者不同厂家的JVM可能会有概率性生成多个实例的情况，不推荐在实际产品中使用。<code>效率低，依赖JVM，有可能失效</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonDoubleCheck</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. 私有静态变量维护当前对象实例,volatile能保证双重检查锁不被jvm影响失效</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> SingletonDoubleCheck instance = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1. 私有构造函数</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">SingletonDoubleCheck</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3. 公有静态方法，获取对象实例</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SingletonDoubleCheck <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">synchronized</span> (SingletonDoubleCheck.class) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="comment">//双重检查</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line"></span><br><span class="line">                    instance = <span class="keyword">new</span> SingletonDoubleCheck();</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> instance;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>饿汉式</strong>。 线程安全，调用效率高，但是不能延时加载对象实例，不推荐实际使用。<code>会影响代码执行速度</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonEhan</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//私有静态变量</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SingletonEhaninstance = <span class="keyword">new</span> SingletonEhan();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 私有化构造方法</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">SingletonEhan</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">     <span class="comment">//公有静态方法</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SingletonEhan <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>静态内部类</strong>。这是对饿汉式的优化。线程安全，调用效率高，而且支持延时加载对象实例，推荐使用。</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonInnerStatic</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonHoler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 静态初始化器，由JVM来保证线程安全</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> SingletonInnerStatic instance = </span><br><span class="line"></span><br><span class="line">            <span class="keyword">new</span> SingletonInnerStatic();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 私有构造函数</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">SingletonInnerStatic</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取对象实例的方法</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SingletonInnerStatic <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> SingletonHoler.instance;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<p>单例模式需要确保只生成一个对象实例，我们可以通过下面的三种方式进行攻击，尝试获取多个不同的对象实例。</p>
</blockquote>
<p><strong>三种攻击方式：</strong></p>
<ul>
<li><p><strong>反射攻击</strong>：利用jdk反射API，修改单例类构造函数的访问权限，然后调用构造函数；</p>
</li>
<li><p><strong>序列化攻击</strong>：将单例对象实例以字节流的方式写入到文件中，然后再读取文件字节流，反序列化生成对象实例;</p>
</li>
<li><p>调用对象的克隆方法。</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//正常单例对象</span></span><br><span class="line"></span><br><span class="line">    Singleton single1 = Singleton.getInstance();</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="comment">//1. 反射攻击</span></span><br><span class="line"></span><br><span class="line">    Class clazz = Singleton.class;</span><br><span class="line"></span><br><span class="line">    Constructor  cons = clazz.getDeclaredConstructor(<span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">    cons.setAccessible(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">    Singleton single2 =(Singleton) cons.newInstance(<span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. 序列化攻击</span></span><br><span class="line"></span><br><span class="line">    FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">&quot;a.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line">    ObjectOutputStream oos = <span class="keyword">new</span> ObjectOutputStream(fos);</span><br><span class="line"></span><br><span class="line">     oos.writeObject(single1);</span><br><span class="line"></span><br><span class="line">     oos.flush();</span><br><span class="line"></span><br><span class="line">     oos.close();</span><br><span class="line"></span><br><span class="line">           </span><br><span class="line"></span><br><span class="line">      FileInputStreamfis = <span class="keyword">new</span> FileInputStream(<span class="string">&quot;a.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line">      ObjectInputStreamois = <span class="keyword">new</span> ObjectInputStream(fis);</span><br><span class="line"></span><br><span class="line">      Singleton single3 =(Singleton) ois.readObject();</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">      <span class="comment">//3. clone攻击</span></span><br><span class="line"></span><br><span class="line">      Singleton single4 =(Singleton) single1.clone();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>可以采用如下方式修复漏洞：</strong></p>
</blockquote>
<ul>
<li><p><strong>修复反射漏洞</strong>：反射漏洞的原理是多次调用构造函数。可以在构造函数中增加判断，如果已经生成了实例对象，说明此构造函数已经调用过至少一次，禁止在调用构造函数，此时，判定为非法调用，直接抛出异常。</p>
</li>
<li><p><strong>修复反序列化漏洞：</strong>重写<strong>readResolve()方法</strong>，直接返回实例对象。JVM在处理反序列化生成对象时会回调此方法，直接得到对象实例。</p>
</li>
<li><p><strong>修复克隆漏洞：</strong>重写**clone()**方法，直接返回实例对象。</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> <span class="keyword">implements</span> <span class="title">Cloneable</span>, <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> longserialVersionUID =-<span class="number">2516616785479458264L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> Singleton instance = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 防止反射漏洞</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (instance != <span class="keyword">null</span>)&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException();</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取对象实例</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">synchronized</span> (Singleton.class) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line"></span><br><span class="line">                    instance = <span class="keyword">new</span> Singleton();</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">             &#125;</span><br><span class="line"></span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 反序列化时，如果定义了readResolve()，则直接返回此方法指定的对象，而不需要单独在创建新对象</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">readResolve</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 防止Clone生成新的对象</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">clone</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>单元素枚举类</strong>。这是一种稍微少见的代码写法，线程安全，调用效率高，并且由于JVM对枚举类的特殊处理方式，天然的解决了前面的安全漏洞。但是，如果希望在首次初始化对象时运行全局逻辑，这种方式会比较困难。需要根据实际功能场景考虑使用。</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">SingletonEnum</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    INSTANCE;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 定义一个枚举的元素，它 就代表了Singleton的一个实例</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">singletonOperation</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 功能处理</span></span><br><span class="line"></span><br><span class="line">        System.err.println(<span class="string">&quot;功能处理&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//客户端调用示例</span></span><br><span class="line"></span><br><span class="line">        SingletonEnum.INSTANCE.singletonOperation();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>JAVA</category>
      </categories>
  </entry>
</search>
